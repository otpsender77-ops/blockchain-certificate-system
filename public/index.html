<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Digital Excellence Institute - Certificate System</title>
    <link rel="icon" type="image/x-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üéì</text></svg>">
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.3/build/qrcode.min.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/qrcode-reader@1.0.4/dist/index.min.js" defer></script>
    <script src="qr-code-utils.js" defer></script>
</head>
<body>
    <!-- Navigation Header -->
    <header class="header" id="header">
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <h1>Digital Excellence Institute</h1>
                    <span>Blockchain Certificate System</span>
                </div>
                <nav class="nav" id="mainNav">
                    <!-- Navigation will be populated by JavaScript -->
                </nav>
            </div>
        </div>
    </header>

    <!-- Main Content Area -->
    <main class="main">
        <!-- Login Page -->
        <section id="loginPage" class="page active">
            <div class="container">
                <div class="login-container">
                    <div class="login-card card">
                        <div class="card__body">
                            <h2>Admin Login</h2>
                            <p>Access the certificate management system</p>
                            <form id="loginForm" class="form">
                                <div class="form-group">
                                    <label class="form-label" for="username">Username:</label>
                                    <input type="text" id="username" class="form-control" placeholder="Enter your username" required>
                                </div>
                                <div class="form-group">
                                    <label class="form-label" for="password">Password:</label>
                                    <input type="password" id="password" class="form-control" placeholder="Enter your password" required>
                                </div>
                                
                                <!-- Step 1: Username/Password Login -->
                                <button type="submit" class="btn btn--primary btn--full-width" id="loginBtn">
                                    Verify Credentials
                                </button>
                                
                                <!-- MetaMask Connection Section (Hidden initially) -->
                                <div class="metamask-section" id="metamaskSection" style="display: none;">
                                    <div class="form-group">
                                        <label class="form-label">MetaMask Wallet:</label>
                                        <div class="metamask-status" id="metamaskStatus">
                                            <div class="metamask-not-connected">
                                                <span class="metamask-icon">ü¶ä</span>
                                                <span>MetaMask not connected</span>
                                            </div>
                                        </div>
                                        <button type="button" id="connectMetaMaskBtn" class="btn btn--outline btn--full-width">
                                            Connect MetaMask Wallet
                                        </button>
                                    </div>
                                    <div class="metamask-address" id="metamaskAddress" style="display: none;">
                                        <small>Connected: <span id="connectedAddress"></span></small>
                                    </div>
                                    <button type="button" id="completeLoginBtn" class="btn btn--primary btn--full-width" disabled>
                                        Complete Login
                                    </button>
                                </div>
                            </form>
                            <div class="login-footer">
                                <p><a href="#" id="forgotPasswordLink">Forgot Password?</a></p>
                                <p><a href="#" id="verifierLink">Access Verifier Portal</a></p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Admin Dashboard -->
        <section id="adminDashboard" class="page">
            <div class="container">
                <div class="dashboard-header">
                    <h2>Admin Dashboard</h2>
                    <div class="dashboard-stats">
                        <div class="stat-card">
                            <div class="stat-number" id="totalCertificates">0</div>
                            <div class="stat-label">Total Certificates</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="todayCertificates">0</div>
                            <div class="stat-label">Today's Certificates</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="totalVerifications">0</div>
                            <div class="stat-label">Total Verifications</div>
                        </div>
                    </div>
                </div>
                
                <div class="dashboard-actions">
                    <button class="btn btn--primary" id="generateCertBtn">Generate New Certificate</button>
                    <button class="btn btn--secondary" id="manageCertBtn">Manage Certificates</button>
                    <button class="btn btn--outline" id="emailHistoryBtn">Email History</button>
                </div>
            </div>
        </section>

        <!-- Certificate Generation -->
        <section id="certificateGeneration" class="page">
            <div class="container">
                <div class="generation-layout">
                    <div class="generation-form">
                        <div class="card">
                            <div class="card__body">
                                <div class="generation-header">
                                    <h3>Generate Certificate</h3>
                                    <button type="button" id="batchModeBtn" class="btn btn--outline">Batch Mode</button>
                                </div>
                                <form id="certificateForm" class="form">
                                    <div class="form-group">
                                        <label class="form-label" for="studentName">Student Name:</label>
                                        <input type="text" id="studentName" class="form-control" required>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label class="form-label" for="parentName">Parent Name:</label>
                                        <input type="text" id="parentName" class="form-control" required>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label class="form-label" for="district">District:</label>
                                        <input type="text" id="district" class="form-control" required>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label class="form-label" for="state">State:</label>
                                        <select id="state" class="form-control" required>
                                            <option value="">Select State</option>
                                            <option value="MEGHALAYA">MEGHALAYA</option>
                                            <option value="ASSAM">ASSAM</option>
                                            <option value="WEST BENGAL">WEST BENGAL</option>
                                            <option value="DELHI">DELHI</option>
                                            <option value="MAHARASHTRA">MAHARASHTRA</option>
                                        </select>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label class="form-label" for="courseName">Course Name:</label>
                                        <select id="courseName" class="form-control" required>
                                            <option value="">Select Course</option>
                                            <option value="Certificate Course in Entrepreneurship (CCE)">Certificate Course in Entrepreneurship (CCE)</option>
                                            <option value="Digital Marketing Fundamentals">Digital Marketing Fundamentals</option>
                                            <option value="Web Development Bootcamp">Web Development Bootcamp</option>
                                            <option value="Data Science Essentials">Data Science Essentials</option>
                                            <option value="Blockchain Technology">Blockchain Technology</option>
                                        </select>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label class="form-label" for="studentEmail">Student Email:</label>
                                        <input type="email" id="studentEmail" class="form-control" required>
                                    </div>
                                    
                                    <div class="form-actions">
                                        <button type="submit" class="btn btn--primary">Generate Certificate</button>
                                        <button type="button" class="btn btn--outline" id="previewBtn">Preview</button>
                                    </div>
                                </form>
                                
                                <div id="blockchainStatus" class="blockchain-status" style="display: none;">
                                    <h4>Blockchain Transaction</h4>
                                    <div class="status-item">
                                        <span class="status-label">Transaction Hash:</span>
                                        <span class="status-value" id="txHash"></span>
                                    </div>
                                    <div class="status-item">
                                        <span class="status-label">Block Number:</span>
                                        <span class="status-value" id="blockNumber"></span>
                                    </div>
                                    <div class="status-item">
                                        <span class="status-label">Gas Used:</span>
                                        <span class="status-value" id="gasUsed"></span>
                                    </div>
                                    <div class="status-indicator status--success">
                                        ‚úì Certificate stored on blockchain
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Batch Processing Interface -->
                        <div id="batchProcessingCard" class="card" style="display: none;">
                            <div class="card__body">
                                <div class="generation-header">
                                    <h3>Batch Certificate Generation</h3>
                                    <button type="button" id="singleModeBtn" class="btn btn--outline">Single Mode</button>
                                </div>
                                
                                <!-- CSV Upload Section -->
                                <div class="batch-section">
                                    <h4>Upload CSV/Excel File</h4>
                                    <div class="form-group">
                                        <label class="form-label" for="csvFile">Select CSV/Excel File:</label>
                                        <input type="file" id="csvFile" class="form-control" accept=".csv,.xlsx,.xls">
                                        <small>Maximum 50 students per batch. Download <a href="#" id="downloadTemplate">template</a></small>
                                    </div>
                                    <button type="button" id="uploadCsvBtn" class="btn btn--primary">Upload and Process</button>
                                </div>
                                
                                <div class="divider">OR</div>
                                
                                <!-- Manual Entry Section -->
                                <div class="batch-section">
                                    <h4>Manual Entry (Up to 50 students)</h4>
                                    <div class="batch-controls">
                                        <button type="button" id="addStudentBtn" class="btn btn--secondary">Add Student</button>
                                        <button type="button" id="clearAllBtn" class="btn btn--outline">Clear All</button>
                                        <span id="studentCount">0 students added</span>
                                    </div>
                                    
                                    <div id="batchStudentsList" class="batch-students-list">
                                        <!-- Students will be added here dynamically -->
                                    </div>
                                    
                                    <div class="form-actions">
                                        <button type="button" id="generateBatchBtn" class="btn btn--primary" disabled>Generate Batch Certificates</button>
                                    </div>
                                </div>
                                
                                <!-- Batch Processing Results -->
                                <div id="batchResults" class="batch-results" style="display: none;">
                                    <h4>Batch Processing Results</h4>
                                    <div id="batchResultsContent"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="generation-preview">
                        <div class="card">
                            <div class="card__body">
                                <div class="certificate-preview" id="certificatePreview">
                                    <!-- Certificate preview will be rendered here -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Certificate Management -->
        <section id="certificateManagement" class="page">
            <div class="container">
                <div class="management-header">
                    <h3>Certificate Management</h3>
                    <div class="management-controls">
                        <input type="text" id="searchCertificates" class="form-control" placeholder="Search certificates...">
                        <button class="btn btn--outline" id="refreshBtn">üîÑ Refresh</button>
                        <button class="btn btn--outline" id="exportBtn">Export CSV</button>
                    </div>
                </div>
                
                <div class="certificates-table">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Certificate ID</th>
                                <th>Student Name</th>
                                <th>Course</th>
                                <th>Date Generated</th>
                                <th>Status</th>
                                <th>Transaction Hash</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="certificatesTableBody">
                            <!-- Certificates will be populated here -->
                        </tbody>
                    </table>
                </div>
            </div>
        </section>

        <!-- Verifier Portal -->
        <section id="verifierPortal" class="page">
            <div class="container">
                <div class="verifier-header">
                    <h2>Certificate Verification Portal</h2>
                    <p>Verify the authenticity of certificates issued by Digital Excellence Institute</p>
                </div>
                
                <div class="verification-methods">
                    <div class="method-tabs">
                        <button class="tab-btn active" data-tab="certificateId">Certificate ID</button>
                        <button class="tab-btn" data-tab="blockchainHash">Transaction Hash</button>
                        <button class="tab-btn" data-tab="qrScan">QR Code</button>
                    </div>
                    
                    <div class="tab-content">
                        <div id="certificateIdTab" class="tab-panel active">
                            <div class="verification-form">
                                <div class="form-group">
                                    <label class="form-label">Enter Certificate ID:</label>
                                    <input type="text" id="verifyCertId" class="form-control" placeholder="e.g., CRT2025001">
                                </div>
                                <button class="btn btn--primary" id="verifyCertIdBtn">
                                    <span id="verifyCertIdBtnText">Verify Certificate</span>
                                    <span id="verifyCertIdBtnLoading" style="display: none;">Verifying...</span>
                                </button>
                            </div>
                        </div>
                        
                        <div id="blockchainHashTab" class="tab-panel">
                            <div class="verification-form">
                                <div class="form-group">
                                    <label class="form-label">Enter Blockchain Transaction Hash:</label>
                                    <input type="text" id="verifyHashInput" class="form-control" placeholder="0x...">
                                </div>
                                <button class="btn btn--primary" id="verifyHashBtn">
                                    <span id="verifyHashBtnText">Verify Transaction</span>
                                    <span id="verifyHashBtnLoading" style="display: none;">Verifying...</span>
                                </button>
                            </div>
                        </div>
                        
                        <div id="qrScanTab" class="tab-panel">
                            <div class="verification-form">
                                <div class="form-group">
                                    <label class="form-label">Scan QR Code with Webcam:</label>
                                    <div id="qrScanner" style="text-align: center; margin: 20px 0;">
                                        <video id="qrVideo" width="320" height="240" style="border: 2px solid #1e40af; border-radius: 8px; display: none;"></video>
                                        <canvas id="qrCanvas" width="320" height="240" style="display: none;"></canvas>
                                        <div id="qrStatus" style="margin: 10px 0; padding: 10px; background: #f3f4f6; border-radius: 8px;">
                                            <p>Click "Start Camera" to begin QR code scanning</p>
                                        </div>
                                        <button class="btn btn--secondary" id="startCameraBtn">Start Camera</button>
                                        <button class="btn btn--outline" id="stopCameraBtn" style="display: none;">Stop Camera</button>
                                        <button class="btn btn--primary" id="scanQRBtn" style="display: none; margin-left: 10px;">Scan QR Code</button>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Or paste QR Code Data manually:</label>
                                    <textarea id="qrCodeInput" class="form-control" rows="4" placeholder="Paste QR code content here..."></textarea>
                                    <small>Alternative: Scan QR code and paste the content above</small>
                                </div>
                                <button class="btn btn--primary" id="verifyQRBtn">
                                    <span id="verifyQRBtnText">Verify QR Code</span>
                                    <span id="verifyQRBtnLoading" style="display: none;">Verifying...</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div id="verificationResult" class="verification-result" style="display: none;">
                    <!-- Verification results will be shown here -->
                </div>
            </div>
        </section>

        <!-- Batch Processing Page -->
        <section id="batchProcessing" class="page">
            <div class="container">
                <div class="page-header">
                    <h2>Batch Certificate Processing</h2>
                    <p>Process multiple certificates at once using CSV upload</p>
                </div>
                
                <div class="batch-upload-section">
                    <div class="upload-area" id="uploadArea">
                        <div class="upload-content">
                            <span class="upload-icon">üìÅ</span>
                            <h3>Upload CSV File</h3>
                            <p>Drag and drop your CSV file here or click to browse</p>
                            <input type="file" id="csvFileInput" accept=".csv" style="display: none;">
                            <button class="btn btn--primary" onclick="document.getElementById('csvFileInput').click()">
                                Choose File
                            </button>
                        </div>
                    </div>
                    
                    <div class="batch-preview" id="batchPreview" style="display: none;">
                        <h3>Preview Data</h3>
                        <div class="preview-table-container">
                            <table class="preview-table">
                                <thead id="previewTableHead"></thead>
                                <tbody id="previewTableBody"></tbody>
                            </table>
                        </div>
                        <div class="batch-actions">
                            <button class="btn btn--primary" id="processBatchBtn">Process Batch</button>
                            <button class="btn btn--outline" id="clearBatchBtn">Clear</button>
                        </div>
                    </div>
                </div>
                
                <div class="batch-progress" id="batchProgress" style="display: none;">
                    <h3>Processing Progress</h3>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill"></div>
                    </div>
                    <div class="progress-text" id="progressText">0% Complete</div>
                    <div class="progress-details" id="progressDetails"></div>
                </div>
                
                <div class="batch-results" id="batchResults" style="display: none;">
                    <h3>Processing Results</h3>
                    <div class="results-summary">
                        <div class="result-item success">
                            <span class="result-icon">‚úÖ</span>
                            <span class="result-text">Successful: <span id="successCount">0</span></span>
                        </div>
                        <div class="result-item error">
                            <span class="result-icon">‚ùå</span>
                            <span class="result-text">Failed: <span id="errorCount">0</span></span>
                        </div>
                    </div>
                    <div class="results-actions">
                        <button class="btn btn--primary" id="downloadResultsBtn">Download Results</button>
                        <button class="btn btn--outline" id="newBatchBtn">New Batch</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Revocation Center Page -->
        <section id="revocationCenter" class="page">
            <div class="container">
                <div class="page-header">
                    <h2>Certificate Revocation Center</h2>
                    <p>Revoke certificates and manage revocation status</p>
                </div>
                
                <div class="revocation-search">
                    <div class="search-form">
                        <div class="form-group">
                            <label class="form-label" for="revocationSearch">Search Certificate:</label>
                            <div class="search-input-group">
                                <input type="text" id="revocationSearch" class="form-control" placeholder="Enter Certificate ID or Transaction Hash">
                                <button class="btn btn--primary" id="searchRevocationBtn">Search</button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="revocation-results" id="revocationResults" style="display: none;">
                    <div class="certificate-info">
                        <h3>Certificate Information</h3>
                        <div class="info-grid" id="certificateInfoGrid"></div>
                    </div>
                    
                    <div class="revocation-actions">
                        <h3>Revocation Actions</h3>
                        <div class="action-buttons">
                            <button class="btn btn--danger" id="revokeCertificateBtn" style="display: none;">
                                <span class="btn-icon">‚ùå</span>
                                Revoke Certificate
                            </button>
                            <button class="btn btn--success" id="restoreCertificateBtn" style="display: none;">
                                <span class="btn-icon">‚úÖ</span>
                                Restore Certificate
                            </button>
                        </div>
                    </div>
                </div>
                
                <div class="revocation-history">
                    <h3>Recent Revocations</h3>
                    <div class="history-table-container">
                        <table class="history-table">
                            <thead>
                                <tr>
                                    <th>Certificate ID</th>
                                    <th>Student Name</th>
                                    <th>Status</th>
                                    <th>Revoked By</th>
                                    <th>Date</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="revocationHistoryBody">
                                <tr>
                                    <td colspan="6" class="text-center">No revocation history available</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </section>

        <!-- Email Preview Modal -->
        <div id="emailModal" class="modal hidden">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>Email Preview</h3>
                    <button class="modal-close" id="closeEmailModal">&times;</button>
                </div>
                <div class="modal-body">
                    <div class="email-preview" id="emailPreview">
                        <!-- Email content will be rendered here -->
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn btn--primary" id="sendEmailBtn">Send Email</button>
                    <button class="btn btn--outline" id="cancelEmailBtn">Cancel</button>
                </div>
            </div>
        </div>

        <!-- Certificate Detail Modal -->
        <div id="certificateModal" class="modal hidden">
            <div class="modal-content large">
                <div class="modal-header">
                    <h3>Certificate Details</h3>
                    <button class="modal-close" id="closeCertModal">&times;</button>
                </div>
                <div class="modal-body">
                    <div id="certificateDetail">
                        <!-- Certificate detail will be rendered here -->
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn btn--primary" id="printCertBtn">Print Certificate</button>
                    <button class="btn btn--secondary" id="resendEmailBtn">Resend Email</button>
                    <button class="btn btn--outline" id="closeCertDetailBtn">Close</button>
                </div>
            </div>
        </div>
        
        <!-- Revocation Modal -->
        <div id="revocationModal" class="modal hidden">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>Revoke Certificate</h3>
                    <button class="modal-close" id="closeRevocationModal">&times;</button>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label class="form-label" for="revocationReason">Revocation Reason:</label>
                        <textarea id="revocationReason" class="form-control" rows="4" placeholder="Enter the reason for revoking this certificate..." required></textarea>
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="revokedBy">Revoked By:</label>
                        <input type="text" id="revokedBy" class="form-control" placeholder="Enter your name or designation" required>
                    </div>
                    <div class="warning-box">
                        <strong>‚ö†Ô∏è Warning:</strong> This action cannot be undone. The certificate will be marked as revoked and the student will be notified via email.
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn btn--danger" id="confirmRevokeBtn">Revoke Certificate</button>
                    <button class="btn btn--outline" id="cancelRevokeBtn">Cancel</button>
                </div>
            </div>
        </div>
    </main>

    <!-- Loading Spinner -->
    <div id="loadingSpinner" class="loading-spinner hidden">
        <div class="spinner"></div>
        <p>Processing...</p>
    </div>

    <!-- Forgot Password Modal -->
    <div id="forgotPasswordModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Reset Password</h3>
                <span class="close" id="closeForgotPasswordModal">&times;</span>
            </div>
            <div class="modal-body">
                <div id="forgotPasswordStep1">
                    <p>Enter your email address to receive a password reset OTP:</p>
                    <form id="forgotPasswordForm" class="form">
                        <div class="form-group">
                            <label class="form-label" for="resetEmail">Email:</label>
                            <input type="email" id="resetEmail" class="form-control" placeholder="Enter your email" required>
                        </div>
                        <button type="submit" class="btn btn--primary btn--full-width">Send OTP</button>
                    </form>
                </div>
                
                <div id="forgotPasswordStep2" style="display: none;">
                    <p>Enter the OTP sent to your email and your new password:</p>
                    <form id="resetPasswordForm" class="form">
                        <div class="form-group">
                            <label class="form-label" for="resetOTP">OTP:</label>
                            <input type="text" id="resetOTP" class="form-control" placeholder="Enter 6-digit OTP" maxlength="6" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label" for="newPassword">New Password:</label>
                            <input type="password" id="newPasswordProfile" class="form-control" placeholder="Enter new password" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label" for="confirmPassword">Confirm Password:</label>
                            <input type="password" id="confirmPasswordProfile" class="form-control" placeholder="Confirm new password" required>
                        </div>
                        <button type="submit" class="btn btn--primary btn--full-width">Reset Password</button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Profile Modal -->
    <div id="profileModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Admin Profile</h3>
                <button class="modal-close" id="closeProfileModal">&times;</button>
            </div>
            <div class="modal-body">
                <form id="profileForm" class="form">
                    <div class="form-group">
                        <label class="form-label" for="profileFullName">Full Name:</label>
                        <input type="text" id="profileFullName" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="profileEmail">Email:</label>
                        <input type="email" id="profileEmail" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="profilePhone">Phone:</label>
                        <input type="tel" id="profilePhone" class="form-control">
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="profileDepartment">Department:</label>
                        <input type="text" id="profileDepartment" class="form-control">
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="profilePicture">Profile Picture URL:</label>
                        <input type="url" id="profilePicture" class="form-control">
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn--primary" id="saveProfileBtn">Save Profile</button>
                <button class="btn btn--outline" id="cancelProfileBtn">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Change Password Modal -->
    <div id="changePasswordModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Change Password</h3>
                <button class="modal-close" id="closeChangePasswordModal">&times;</button>
            </div>
            <div class="modal-body">
                <form id="changePasswordForm" class="form">
                    <div class="form-group">
                        <label class="form-label" for="currentPassword">Current Password:</label>
                        <input type="password" id="currentPassword" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="newPassword">New Password:</label>
                        <input type="password" id="newPassword" class="form-control" required>
                        <small class="form-text">Password must be at least 12 characters with uppercase, lowercase, number, and special character</small>
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="confirmPassword">Confirm New Password:</label>
                        <input type="password" id="confirmPassword" class="form-control" required>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn--primary" id="savePasswordBtn">Change Password</button>
                <button class="btn btn--outline" id="cancelPasswordBtn">Cancel</button>
            </div>
        </div>
    </div>

    <!-- System Settings Modal -->
    <div id="settingsModal" class="modal hidden">
        <div class="modal-content large">
            <div class="modal-header">
                <h3>System Settings</h3>
                <button class="modal-close" id="closeSettingsModal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="settings-tabs">
                    <button class="tab-btn active" data-tab="certificate">Certificate</button>
                    <button class="tab-btn" data-tab="email">Email</button>
                    <button class="tab-btn" data-tab="system">System</button>
                    <button class="tab-btn" data-tab="security">Security</button>
                </div>
                
                <div class="settings-content">
                    <!-- Certificate Settings -->
                    <div id="certificate-settings" class="settings-panel active">
                        <h4>Certificate Settings</h4>
                        <form id="certificateSettingsForm" class="form">
                            <div class="form-group">
                                <label class="form-label" for="instituteName">Institute Name:</label>
                                <input type="text" id="instituteName" class="form-control" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label" for="instituteAddress">Institute Address:</label>
                                <textarea id="instituteAddress" class="form-control" rows="3"></textarea>
                            </div>
                            <div class="form-group">
                                <label class="form-label" for="defaultCourseName">Default Course Name:</label>
                                <input type="text" id="defaultCourseName" class="form-control">
                            </div>
                            <div class="form-group">
                                <label class="form-label" for="certificateValidity">Certificate Validity (days):</label>
                                <input type="number" id="certificateValidity" class="form-control" min="1" max="3650">
                            </div>
                        </form>
                    </div>

                    <!-- Email Settings -->
                    <div id="email-settings" class="settings-panel">
                        <h4>Email Settings</h4>
                        <form id="emailSettingsForm" class="form">
                            <div class="form-group">
                                <label class="form-label" for="fromName">From Name:</label>
                                <input type="text" id="fromName" class="form-control" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label" for="fromEmail">From Email:</label>
                                <input type="email" id="fromEmail" class="form-control" required>
                            </div>
                            <div class="form-group">
                                <label class="form-checkbox">
                                    <input type="checkbox" id="includeQRCode" checked>
                                    <span class="checkmark"></span>
                                    Include QR Code in emails
                                </label>
                            </div>
                            <div class="form-group">
                                <label class="form-checkbox">
                                    <input type="checkbox" id="includeVerificationLink" checked>
                                    <span class="checkmark"></span>
                                    Include verification link in emails
                                </label>
                            </div>
                        </form>
                    </div>

                    <!-- System Settings -->
                    <div id="system-settings" class="settings-panel">
                        <h4>System Settings</h4>
                        <form id="systemSettingsForm" class="form">
                            <div class="form-group">
                                <label class="form-label" for="maxBatchSize">Max Batch Size:</label>
                                <input type="number" id="maxBatchSize" class="form-control" min="1" max="100">
                            </div>
                            <div class="form-group">
                                <label class="form-checkbox">
                                    <input type="checkbox" id="autoEmailSending" checked>
                                    <span class="checkmark"></span>
                                    Auto-send emails after certificate generation
                                </label>
                            </div>
                            <div class="form-group">
                                <label class="form-checkbox">
                                    <input type="checkbox" id="requireMetaMask" checked>
                                    <span class="checkmark"></span>
                                    Require MetaMask for admin login
                                </label>
                            </div>
                            <div class="form-group">
                                <label class="form-checkbox">
                                    <input type="checkbox" id="enableRevocation" checked>
                                    <span class="checkmark"></span>
                                    Enable certificate revocation
                                </label>
                            </div>
                        </form>
                    </div>

                    <!-- Security Settings -->
                    <div id="security-settings" class="settings-panel">
                        <h4>Security Settings</h4>
                        <form id="securitySettingsForm" class="form">
                            <div class="form-group">
                                <label class="form-label" for="sessionTimeout">Session Timeout (hours):</label>
                                <input type="number" id="sessionTimeout" class="form-control" min="1" max="168">
                            </div>
                            <div class="form-group">
                                <label class="form-label" for="maxLoginAttempts">Max Login Attempts:</label>
                                <input type="number" id="maxLoginAttempts" class="form-control" min="3" max="20">
                            </div>
                            <div class="form-group">
                                <label class="form-label" for="lockoutDuration">Lockout Duration (minutes):</label>
                                <input type="number" id="lockoutDuration" class="form-control" min="5" max="60">
                            </div>
                            <div class="form-group">
                                <label class="form-checkbox">
                                    <input type="checkbox" id="requireStrongPasswords" checked>
                                    <span class="checkmark"></span>
                                    Require strong passwords
                                </label>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn--primary" id="saveSettingsBtn">Save Settings</button>
                <button class="btn btn--outline" id="resetSettingsBtn">Reset to Default</button>
                <button class="btn btn--outline" id="cancelSettingsBtn">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Notification Container -->
    <div id="notificationContainer" class="notification-container"></div>

    <script src="https://cdn.jsdelivr.net/npm/jsqr@1.4.0/dist/jsQR.js"></script>
    <script src="app.js"></script>
</body>
</html>